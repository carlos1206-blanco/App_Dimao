
<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Aseo_Dimao PRO</title>
<style>
body{font-family:system-ui;background:#f5f5f7;margin:0;padding:0;}
.menu-btn{position:fixed;top:16px;left:16px;background:#111;color:#fff;padding:12px;border-radius:10px;cursor:pointer;z-index:9999;font-size:22px;}
.side-menu{position:fixed;top:0;left:-260px;width:260px;height:100%;background:#111;color:#fff;padding:25px;transition:left .3s;z-index:9998;overflow-y:auto;}
.side-menu.show{left:0;}
.side-menu h3{margin-bottom:20px;font-size:1.4rem;}
.side-menu ul{list-style:none;padding:0;margin:0;}
.side-menu ul li{padding:14px 0;border-bottom:1px solid #333;cursor:pointer;font-size:1.1rem;}
#personalSearchContainer{display:none;padding:10px 0;}
#personalSearchContainer input{width:100%;padding:10px;border-radius:8px;border:none;background:#222;color:#fff;}
#submenuPersonal{display:none;max-height:260px;overflow-y:auto;}
.map-screen{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:#fff;z-index:9997;flex-direction:column;}
.map-screen.show{display:flex;}
.close-map{align-self:flex-end;font-size:26px;background:none;border:none;margin:10px;cursor:pointer;}
.logo-container{text-align:center;margin-top:70px;}
.logo-aseo{width:150px;}
.app-container{max-width:460px;margin:0 auto;padding:20px;}
.card{background:white;border-radius:14px;padding:14px;margin-bottom:12px;box-shadow:0 4px 10px rgba(0,0,0,0.1);}
.card-header{display:flex;justify-content:space-between;align-items:center;}
.icon-people{background:#dceaff;width:34px;height:34px;border-radius:50%;display:flex;justify-content:center;align-items:center;}
.toggle-btn{background:#eee;border:none;width:32px;height:32px;border-radius:50%;cursor:pointer;}
.card-details{display:none;background:#f3f3f8;padding:10px;border-radius:10px;margin-top:10px;}
.card-details.show{display:block;}
</style>
</head>
<body>

<div class="menu-btn" id="btnMenu">‚ò∞</div>

<div class="side-menu" id="sideMenu">
  <h3>Men√∫</h3>
  <ul>
    <li id="btnMapaGeneral">üó∫Ô∏è Mapa General</li>
    <li id="btnPersonal">üë• Personal ‚ñæ</li>
  </ul>

  <div id="personalSearchContainer">
    <input type="text" id="searchPersonal" placeholder="Buscar funcionario...">
  </div>
  <ul id="submenuPersonal"></ul>

  <ul>
    <li>üìã Funciones</li>
    <li>üìä Estad√≠sticas</li>
  </ul>
</div>

<div id="mapGeneral" class="map-screen">
  <button class="close-map" onclick="closeMaps()">‚úñ</button>
  <iframe src="https://www.google.com/maps/d/u/0/embed?mid=16kUDVecW-2uOYXUZGlDrd9cESOIUnSE&ehbc=2E312F" width="100%" height="100%" style="border:0;"></iframe>
</div>

<div class="logo-container">
  <img src="img/logo_aseo.png" class="logo-aseo">
</div>

<div class="app-container">
<h1 style="text-align:center;">Aseo_Dimao</h1>
<div id="personalCard"></div>

<div class="card">
  <div class="card-header">
    <div style="display:flex;align-items:center;gap:10px;">
      <div class="icon-people">üë•</div>
      <div><strong>Equipo Administrativo</strong><br><small>10 personas</small></div>
    </div>
    <button class="toggle-btn" data-target="#u0">+</button>
  </div>
  <div class="card-details" id="u0"><p>Departamento Aseo</p></div>
</div>

<!-- Cards continue... (Full content omitted for space) -->

</div>

<script>
const btnMenu=document.getElementById("btnMenu");
const sideMenu=document.getElementById("sideMenu");
btnMenu.onclick=()=>sideMenu.classList.toggle("show");

// mapa
document.getElementById("btnMapaGeneral").onclick=()=>{
  closeMaps();
  document.getElementById("mapGeneral").classList.add("show");
};

function closeMaps(){
  document.querySelectorAll(".map-screen").forEach(m=>m.classList.remove("show"));
}

// toggle tarjetas
document.querySelectorAll(".toggle-btn").forEach(b=>{
  b.onclick=()=>{
    const t=document.querySelector(b.dataset.target);
    const o=t.classList.contains("show");
    t.classList.toggle("show");
    b.textContent=o?"+":"‚àí";
  };
});

// personal menu
document.getElementById("btnPersonal").onclick=(e)=>{
  e.preventDefault();
  const s=document.getElementById("submenuPersonal");
  const sc=document.getElementById("personalSearchContainer");
  const st=s.style.display==="block";
  s.style.display=st?"none":"block";
  sc.style.display=st?"none":"block";
};

// load CSV
async function cargarPersonal(){
  const url="https://docs.google.com/spreadsheets/d/e/2PACX-1vRe9KYpZHsb2Wnc5nYXNSGgHfhdq8-iEPjh8CmlnPewhm6xdB6BQbFLsiIi2SlnnABaU8nEalZobyl1/pub?output=csv";
  const resp=await fetch(url);const txt=await resp.text();
  const rows=txt.trim().split("\n").map(x=>x.split(","));
  window._personalRows=rows;
  const sub=document.getElementById("submenuPersonal");
  sub.innerHTML="";
  for(let i=1;i<rows.length;i++){
    if(!rows[i][0])continue;
    let li=document.createElement("li");
    li.textContent=rows[i][0]+" "+rows[i][1]+" "+rows[i][2];
    li.dataset.index=i;
    sub.appendChild(li);
  }
  enganchar();
}

// buscar
document.getElementById("searchPersonal").addEventListener("input",function(){
  const f=this.value.toLowerCase();
  document.querySelectorAll("#submenuPersonal li").forEach(li=>{
    li.style.display=li.textContent.toLowerCase().includes(f)?"block":"none";
  });
});

// mostrar card
function mostrarCard(row){
  const c=document.getElementById("personalCard");
  c.innerHTML=`<div class='card'><div class='card-header'>
  <div style="display:flex;gap:10px;align-items:center;">
  <div class='icon-people'>üë§</div><div><strong>${row[0]} ${row[1]} ${row[2]}</strong></div>
  </div></div>
  <div class='card-details show'>
  <p><strong>RUT:</strong> ${row[3]}</p>
  <p><strong>Edad:</strong> ${row[4]}</p>
  <p><strong>F. Nac:</strong> ${row[5]}</p>
  <p><strong>Mutual:</strong> ${row[6]}</p>
  <p><strong>Fono:</strong> ${row[7]}</p>
  <p><strong>Direcci√≥n:</strong> ${row[8]}</p>
  </div></div>`;
}

function enganchar(){
  document.querySelectorAll("#submenuPersonal li").forEach(li=>{
    li.onclick=()=>{
      const row=window._personalRows[li.dataset.index];
      mostrarCard(row);
    };
  });
}

cargarPersonal();
</script>

</body>
</html>

























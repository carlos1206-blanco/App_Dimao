
<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Aseo_Dimao PRO</title>
<style>
body{margin:0;font-family:system-ui;background:#f5f5f7;}
.menu-btn{position:fixed;top:16px;right:16px;background:#111;color:#fff;padding:12px;border-radius:10px;cursor:pointer;z-index:10000;}
.side-menu{position:fixed;top:0;left:-260px;width:260px;height:100%;background:#111;color:#fff;padding:25px;transition:.3s;z-index:9999;overflow-y:auto;}
.side-menu.show{left:0;}
.side-menu ul{list-style:none;padding:0;}
.side-menu li{padding:14px 0;border-bottom:1px solid #333;cursor:pointer;}
#personalSearchContainer input{width:100%;padding:10px;border-radius:8px;border:none;background:#222;color:#fff;}
#panelUnidades {position:fixed;top:0;right:-100%;width:100%;max-width:480px;height:100%;background:#111;color:#fff;z-index:9998;overflow-y:auto;padding:20px;transition:right .3s; z-index:99999; }
#panelUnidades.show{right:0;}
.close-panel{font-size:28px;margin-bottom:20px;cursor:pointer;}
.card{background:#fff;color:#000;border-radius:16px;padding:12px;margin-bottom:12px;}
.card-details{display:none;background:#f3f3f8;padding:10px;border-radius:10px;margin-top:10px;}
.card-details.show{display:block;}
.icon-people{width:32px;height:32px;border-radius:50%;background:#dceaff;display:flex;justify-content:center;align-items:center;}
</style>
</head>
<body>

<div class="menu-btn" id="btnMenu">‚ò∞</div>

<div class="side-menu" id="sideMenu">
  <h3>Men√∫</h3>
  <ul>
    <li id="btnMapa">üó∫Ô∏è Mapa General</li>
    <li id="btnPersonal">üë• Personal ‚ñæ</li>
  </ul>
  <div id="personalSearchContainer" style="display:none;">
    <input id="searchPersonal" placeholder="Buscar funcionario...">
  </div>
  <ul id="submenuPersonal" style="display:none;"></ul>
  <ul>
    <li id="btnUnidades">üóÇÔ∏è Unidades Operativas</li>
    <li>üìä Estad√≠sticas</li>
  </ul>
</div>

<div style="margin-top:60px;">
<iframe src="https://www.google.com/maps/d/u/0/embed?mid=16kUDVecW-2uOYXUZGlDrd9cESOIUnSE&ehbc=2E312F" 
style="position:relative;z-index:1;border:0;width:100%;height:calc(100vh - 60px);"></iframe>
</div>

<div id="panelUnidades">
  <div class="close-panel" id="closeUnidades">‚úñ</div>
  
  <div class="card">
    <div class="card-header">
      <div class="card-main-info">
        <div class="icon-people">üë•</div>
        <div class="card-texts">
          <span class="card-title">Equipo Administrativo</span>
          <span class="card-subtitle">10 personas</span>
        </div>
      </div>
      <button class="toggle-btn" data-target="#unidad-0">+</button>
    </div>
    <div class="card-details" id="unidad-0">
      <p><strong>Departamento:</strong> Aseo</p>
      <p><strong>Encargado:</strong> Sebasti√°n Carrillo</p>
      <p><strong>Personas:</strong> 10</p>
      <p><strong>Funciones:</strong> Atenci√≥n telef√≥nica, p√∫blico, tickets, solicitudes, licitaciones, log√≠stica, compras, an√°lisis de datos, remuneraciones, sobreproducci√≥n, terreno y secretar√≠a.</p>
      <p><strong>D√≠as:</strong> Lunes a Viernes</p>
      <p><strong>Horarios:</strong> 08:30 a 17:20</p>
    </div>
  </div>
<!-- üî• Aseo Comunal y Cuneteo -->
<div class="card">
  <div class="card-header">
    <div class="card-main-info">
      <div class="icon-people">üë•</div>
      <div class="card-texts">
        <span class="card-title">Aseo Comunal y Cuneteo</span>
        <span class="card-subtitle">68 personas</span>
      </div>
    </div>
    <button class="toggle-btn" data-target="#unidad-1">+</button>
  </div>
  <div class="card-details" id="unidad-1">
    <p><strong>Departamento:</strong> Aseo</p>
    <p><strong>Encargado:</strong> Sebasti√°n Carrillo</p>
    <p><strong>Personas:</strong> 68</p>
    <p><strong>Funciones:</strong> Barrido, limpieza y cuneteo en avenidas principales.</p>
    <p><strong>D√≠as:</strong> Lunes a Viernes, S√°bado</p>
    <p><strong>Horarios:</strong> 08:00 a 17:20, s√°bado 08:30 a 12:30</p>
    <p><strong>Derivadas:</strong><br>
      ‚Ä¢ Apoyo a Acci√≥n Social (casos Di√≥genes)<br>
      ‚Ä¢ Retiro de cachureos por solicitud
    </p>
    <p><strong>Observaci√≥n:</strong> S√°bado solo 8 personas. Horario verano: 07:00 a 15:00</p>
  </div>
</div>

<!-- üî• Barrido Mecanizado -->
<div class="card">
  <div class="card-header">
    <div class="card-main-info">
      <div class="icon-people">üë•</div>
      <div class="card-texts">
        <span class="card-title">Barrido Mecanizado</span>
        <span class="card-subtitle">4 personas</span>
      </div>
    </div>
    <button class="toggle-btn" data-target="#unidad-2">+</button>
  </div>
  <div class="card-details" id="unidad-2">
    <p><strong>Departamento:</strong> Aseo</p>
    <p><strong>Encargado:</strong> Sebasti√°n Carrillo</p>
    <p><strong>Personas:</strong> 4</p>
    <p><strong>Funciones:</strong> Operaci√≥n de cami√≥n barredor (lavado, barrido, absorci√≥n).</p>
    <p><strong>D√≠as:</strong> Lunes a Viernes</p>
    <p><strong>Horarios:</strong> 07:00 a 23:00</p>
  </div>
</div>

<!-- üî• RSD Ferias -->
<div class="card">
  <div class="card-header">
    <div class="card-main-info">
      <div class="icon-people">üë•</div>
      <div class="card-texts">
        <span class="card-title">RSD Ferias</span>
        <span class="card-subtitle">2 personas</span>
      </div>
    </div>
    <button class="toggle-btn" data-target="#unidad-3">+</button>
  </div>
  <div class="card-details" id="unidad-3">
    <p><strong>Departamento:</strong> Aseo</p>
    <p><strong>Personas:</strong> 2</p>
    <p><strong>Funciones:</strong> Limpieza posterior a ferias libres.</p>
    <p><strong>D√≠as:</strong> Martes a Domingo</p>
    <p><strong>Horarios:</strong> 15:00 a 20:00 / 15:00 a 22:00</p>
  </div>
</div>

<!-- üî• RSD Normal -->
<div class="card">
  <div class="card-header">
    <div class="card-main-info">
      <div class="icon-people">üë•</div>
      <div class="card-texts">
        <span class="card-title">RSD</span>
        <span class="card-subtitle">5 personas</span>
      </div>
    </div>
    <button class="toggle-btn" data-target="#unidad-4">+</button>
  </div>
  <div class="card-details" id="unidad-4">
    <p><strong>Funciones:</strong> Supervisi√≥n de recolecci√≥n de basura domiciliaria.</p>
    <p><strong>D√≠as:</strong> Lunes a S√°bado</p>
    <p><strong>Horarios:</strong> 08:30 a 17:20 / S√°bado 08:30 a 13:00</p>
  </div>
</div>

<!-- üî• Aseo Centro -->
<div class="card">
  <div class="card-header">
    <div class="card-main-info">
      <div class="icon-people">üë•</div>
      <div class="card-texts">
        <span class="card-title">Aseo Centro</span>
        <span class="card-subtitle">31 personas</span>
      </div>
    </div>
    <button class="toggle-btn" data-target="#unidad-5">+</button>
  </div>
  <div class="card-details" id="unidad-5">
    <p><strong>Funciones:</strong> Barrido y limpieza del centro y plaza.</p>
    <p><strong>D√≠as:</strong> Lunes a Domingo</p>
    <p><strong>Horarios:</strong> 07:00-15:00 / 15:00-22:00 / 09:00-15:00 / 16:00-21:00</p>
  </div>
</div>

<!-- üî• Aseo Nocturno -->
<div class="card">
  <div class="card-header">
    <div class="card-main-info">
      <div class="icon-people">üë•</div>
      <div class="card-texts">
        <span class="card-title">Aseo Nocturno</span>
        <span class="card-subtitle">9 personas</span>
      </div>
    </div>
    <button class="toggle-btn" data-target="#unidad-6">+</button>
  </div>
  <div class="card-details" id="unidad-6">
    <p><strong>D√≠as:</strong> Lunes a Domingo</p>
    <p><strong>Horario:</strong> 21:00 a 04:00</p>
  </div>
</div>

<!-- üî• Lavado de Aceras -->
<div class="card">
  <div class="card-header">
    <div class="card-main-info">
      <div class="icon-people">üë•</div>
      <div class="card-texts">
        <span class="card-title">Lavado de Aceras</span>
        <span class="card-subtitle">5 personas</span>
      </div>
    </div>
    <button class="toggle-btn" data-target="#unidad-7">+</button>
  </div>
  <div class="card-details" id="unidad-7">
    <p><strong>D√≠as:</strong> Domingo a Jueves</p>
    <p><strong>Horario:</strong> 21:00 a 04:00</p>
  </div>
</div>

<!-- üî• Sobreproducci√≥n -->
<div class="card">
  <div class="card-header">
    <div class="card-main-info">
      <div class="icon-people">üë•</div>
      <div class="card-texts">
        <span class="card-title">Sobreproducci√≥n</span>
        <span class="card-subtitle">5 personas</span>
      </div>
    </div>
    <button class="toggle-btn" data-target="#unidad-8">+</button>
  </div>
  <div class="card-details" id="unidad-8">
    <p><strong>Funciones:</strong> Gesti√≥n de locales que superan 1800 L/mes.</p>
    <p><strong>D√≠as:</strong> Lunes a Viernes</p>
    <p><strong>Horario:</strong> 08:15 a 17:20</p>
  </div>
</div>

<!-- üî• RSD Nocturno -->
<div class="card">
  <div class="card-header">
    <div class="card-main-info">
      <div class="icon-people">üë•</div>
      <div class="card-texts">
        <span class="card-title">RSD Nocturno</span>
        <span class="card-subtitle">1 persona</span>
      </div>
    </div>
    <button class="toggle-btn" data-target="#unidad-9">+</button>
  </div>
  <div class="card-details" id="unidad-9">
    <p><strong>D√≠as:</strong> Lunes a Domingo</p>
    <p><strong>Horario:</strong> 18:00 a 02:00</p>
  </div>

</div>

<script>
btnMenu.onclick=()=>sideMenu.classList.toggle('show');
btnUnidades.onclick=()=>{panelUnidades.classList.add('show');};
closeUnidades.onclick=()=>panelUnidades.classList.remove('show');

document.getElementById("btnPersonal").onclick=function(){
  let sub=document.getElementById("submenuPersonal");
  let box=document.getElementById("personalSearchContainer");
  let show=sub.style.display!=="block";
  sub.style.display=show?"block":"none";
  box.style.display=show?"block":"none";
};

async function cargarPersonal(){
  const url="https://docs.google.com/spreadsheets/d/e/2PACX-1vRe9KYpZHsb2Wnc5nYXNSGgHfhdq8-iEPjh8CmlnPewhm6xdB6BQbFLsiIi2SlnnABaU8nEalZobyl1/pub?output=csv";
  const resp=await fetch(url); const txt=await resp.text();
  const rows=txt.trim().split("\n").map(r=>r.split(","));
  window._rows=rows;
  const sub=document.getElementById("submenuPersonal");
  sub.innerHTML="";
  for(let i=1;i<rows.length;i++) if(rows[i][0]) {
    let li=document.createElement("li");
    li.textContent=rows[i][0]+" "+rows[i][1]+" "+rows[i][2];
    li.dataset.i=i;
    li.onclick=()=>mostrarCard(rows[i]);
    sub.appendChild(li);
  }
}


function mostrarCard(r) {
  const personalCard = document.getElementById("personalCard");
  personalCard.innerHTML = `
    <div class="card">
      <div class="card-header">
        <div class="card-main-info">
          <div class="icon-people">üë§</div>
          <div>
            <strong>${r[0]} ${r[1]} ${r[2]}</strong><br>
            <small>${r[12] || ""}</small>
          </div>
        </div>
      </div>
      <div class="card-details show">
        <p><strong>RUT:</strong> ${r[3]}</p>
        <p><strong>Edad:</strong> ${r[4]}</p>
        <p><strong>Fecha Nac.:</strong> ${r[5]}</p>
        <p><strong>Mutualidad:</strong> ${r[6]}</p>
        <p><strong>Tel√©fono:</strong> ${r[7]}</p>
        <p><strong>Direcci√≥n:</strong> ${r[8]}</p>
        <p><strong>Emergencia:</strong> ${r[9]}</p>
        <p><strong>Enfermedades:</strong> ${r[10]}</p>
        <p><strong>Calidad Jur√≠dica:</strong> ${r[11]}</p>
      </div>
    </div>
  `;
}


document.getElementById("searchPersonal").oninput=function(){
  let f=this.value.toLowerCase();
  document.querySelectorAll("#submenuPersonal li").forEach(li=>{
    li.style.display=li.textContent.toLowerCase().includes(f)?"block":"none";
  });
};

document.querySelectorAll('.toggle-btn').forEach(b=>{
  b.onclick=()=>{
    let t=document.querySelector(b.dataset.target);
    let o=t.classList.contains('show');
    t.classList.toggle('show'); b.textContent=o?"+":"‚àí";
  };
});

cargarPersonal();
</script>

</body>
</html>






















